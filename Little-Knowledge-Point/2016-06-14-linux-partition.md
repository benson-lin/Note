# LINUX 分区

对习惯于使用dos或windows的用户来说，有几个分区就有几个驱动器，并且每个分区都会获得一个字母标识符，然后就可以选用这个字母来指定在这个分区上的文件和目录，它们的文件结构都是独立的，非常好理解。

在 Linux 中规定，硬盘分区分为基本分区和扩展分区, 数目之和不大于四个.(一块硬盘上：主分区+扩展分区<=四), 任何一个扩展分区都要占用一个主分区号码

扩展分区不能直接使用，需要分成逻辑分区才能使用, 逻辑分区数量不限,一个扩展分区可以分成N多逻辑分区

主分区的作用就是计算机用来进行启动操作系统的，因此每一个操作系统的启动，或者称作是引导程序，都应该存放在主分区上。这就是主分区和扩展分区及逻辑分区的最大区别。

Linux 规定了主分区（或者扩展分区）占用 1 至 16 号码中的前 4 个号码。以第一个 IDE 硬盘为例说明，主分区（或者扩展分区）占用了 hda1、hda2、hda3、hda4，而逻辑分区占用了 hda5 到 hda16 等 12 个号码。因此，Linux 下面每一个硬盘总共最多有 16 个分区。

在 Linux 中，每一个硬件设备都映射到一个系统的文件，对于硬盘、光驱等 IDE 或 SCSI 设备也不例外。Linux 把各种 IDE 设备分配了一个由 hd 前缀组成的文件；而对于各种 SCSI 设备，则分配了一个由 sd 前缀组成的文件。

对于ide硬盘，驱动器标识符为“hdx~”,其中“hd”表明分区所在设备的类型，这里是指ide硬盘了。“x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘）,“~”代表分区，前四个分区用数字1到4表示，它们是主分区或扩展分区，从5开始就是逻辑分区。例，hda3表示为第一个ide硬盘上的第三个主分区或扩展分区,hdb2表示为第二个ide硬盘上的第二个主分区或扩展分区。对于scsi硬盘则标识为“sdx~”，scsi硬盘是用“sd”来表示分区所在设备的类型的，其余则和ide硬盘的表示方法一样，不在多说。例如，第一个 IDE 设备，Linux 就定义为 hda；第二个 IDE 设备就定义为 hdb；下面以此类推。而 SCSI 设备就应该是 sda、sdb、sdc 等。


要进行分区就必须针对每一个硬件设备进行操作，这就有可能是一块IDE硬盘或是一块SCSI硬盘。对于每一个硬盘（IDE 或 SCSI）设备，Linux 分配了一个 1 到 16 的序列号码，这就代表了这块硬盘上面的分区号码。例如，第一个 IDE 硬盘的第一个分区，在 Linux 下面映射的就是 hda1，第二个分区就称作是 hda2。对于 SCSI 硬盘则是 sda1、sdb1 等。

对于每一个 Linux 分区来讲，分区的大小和分区的类型是最主要的指标。容量的大小读者很容易理解，但是分区的类型就不是那么容易接受了。分区的类型规定了这个分区上面的文件系统的格式。Linux 支持多种的文件系统格式，其中包含了我们熟悉的FAT32、FAT16、NTFS、HP-UX，以及各种 Linux 特有的 Linux Native和 Linux Swap分区类型。在 Linux 系统中，可以通过分区类型号码来区别这些不同类型的分区。各种类型号码在介绍Fdisk的使用方式的时候将会介绍。






## fdisk命令

Fdisk 是各种 Linux 发行版本中最常用的分区工具，是被定义为 Expert 级别的分区工具

fdisk + 硬盘位置 根据提示进行分区

```linux
[root@localhost beinan]# fdisk -l
Disk /dev/hda: 80.0 GB, 80026361856 bytes
255 heads, 63 sectors/track, 9729 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/hda1   *           1         765     6144831    7  HPFS/NTFS
/dev/hda2             766        2805    16386300    c  W95 FAT32 (LBA)
/dev/hda3            2806        7751    39728745    5  Extended
/dev/hda5            2806        3825     8193118+  83  Linux
/dev/hda6            3826        5100    10241406   83  Linux
/dev/hda7            5101        5198      787153+  82  Linux swap / Solaris
/dev/hda8            5199        6657    11719386   83  Linux
/dev/hda9            6658        7751     8787523+  83  Linux
```
在上面Blocks中，表示的是分区的大小，Blocks的单位是byte ，我们可以换算成M，比如第一个分区/dev/hda1的大小如果换算成M，应该是6144831/1024=6000M，也就是6G左右，其实没有这么 麻烦，粗略的看一下把小数点向前移动三位，就知道大约的体积有多大了；System 表示的文件系统，比如/dev/hda1 是NTFS格式的；/dev/hda2 表示是fat32格式的文件系统；.

在此例中，我们要特别注意的是/dev/hda3分区，这是扩展分区；他下面包含着逻辑分区，其实这个分区相当于一个容器；从属于她的有 hda5,hda6,hda7,hda8,hda9 ；

我们还注意到一点，怎么没有hda4呢？为什么hda4没有包含在扩展分区？一个磁盘最多有四个主分区； hda1-4算都是主分区；hda4不可能包含在扩展分区里，另外扩展分区也算主分区；在本例中，没有hda4这个分区，当然我们可以把其中的一个分区设 置为主分区，只是我当时分区的时候没有这么做而已；

再仔细统计一下，我们看一看这个磁盘是不是还有空间？hda1+hda2+hda3=实际已经分区的体积，所以我们可以这样算 hda1+hda2+hda3=6144831+16386300+39728745 = 62259876 (b)，换算成M单位，小数点向前移三位，所以目前已经划分好的分区大约占用体积是62259.876(M)，其实最精确的计算 62259876/1024=60800.67（M）；而这个磁盘大小是80.0 GB （80026361856byte)，其实实际大小也就是78150.744（M）；通过我们一系列的计算，我们可以得出这个硬盘目前还有使用的空间；大约还有18G未分区的空间；


我们也可以指定fdisk -l 来查看其中一个硬盘的分区情况；

```linux
[root@localhost beinan]# fdisk -l /dev/sda

Disk /dev/sda: 60.0 GB, 60011642880 bytes
64 heads, 32 sectors/track, 57231 cylinders
Units = cylinders of 2048 * 512 = 1048576 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1               1       57231    58604528   83  Linux
```

通过上面情况可以知道，在/dev/sda 这个磁盘中，只有一个分区；使用量差不多是百分百了；
我们也可以通过: cat /proc/partitions查看目前机器中的所有磁盘及分区情况

## df命令

通过这个命令可以查看磁盘的使用情况以及文件系统被挂载的位置；

```linux

[root@VM_221_211_centos ~]# df -h
文件系统        容量  已用  可用 已用% 挂载点
/dev/vda1        20G  4.2G   15G   23% /
devtmpfs        489M     0  489M    0% /dev
tmpfs           497M   24K  497M    1% /dev/shm
tmpfs           497M   13M  485M    3% /run
tmpfs           497M     0  497M    0% /sys/fs/cgroup
tmpfs           100M     0  100M    0% /run/user/0

[root@VM_221_211_centos ~]# df -t ext3
文件系统          1K-块    已用     可用 已用% 挂载点
/dev/vda1      20510332 4380416 15081400   23% /


```